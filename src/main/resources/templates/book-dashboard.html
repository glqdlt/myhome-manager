<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Title</title>
    <link rel="stylesheet" href="/assets/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/assets/my-datatable/datatables.min.css"/>
</head>
<script src="/assets/my-datatable/datatables.min.js"></script>
<script src="/assets/momentjs/min/moment.min.js"></script>
<body>
<div class="content">
    <div class="row">
        <div id="draw-zone" class="col-sm-12">
            <table id="book-data-table" class="table table-striped table-bordered" style="width:100%">
                <thead>
                <tr>
                    <th>SEQ</th>
                    <th>TITLE</th>
                    <th>AUTHOR</th>
                    <th>등록일</th>
                    <th>마감일</th>
                    <th>등록자</th>
                </tr>
                </thead>
            </table>
        </div>
    </div>
</div>

<script type="text/javascript">
    'use strict'
    let table;
    $(document).ready(function () {

        table = $('#book-data-table').DataTable({
            ajax: {
                url: '/api/books',
                method: 'get',
                data: function (req) {
                    // req.searchType = $('#search-type option:selected').val();
                    // req.keyWord = $('#search-value').val();
                },
                error: function (err) {
                    return err;
                }
            },
            searching: true,
            ordering: true,
            severSide: false,
            lengthMenu: [10, 25, 50],
            processing: true,
            select: 'single',
            pagingType: 'full_numbers',
            paging: true,
            lengthChange: true,
            dom: 'Bfrtip',
            buttons: [
                'pageLength',
                'copy',
                'pdf',
                'excel'
            ],
            columns: [
                {
                    data: 'seq', render: function (data) {
                        return '<a href="/dashboard/book/detail/' + data + '">' + data + '</a>';
                    }
                },
                {data: 'title'},
                {
                    data: 'author', render: function (data) {
                        return data.name;
                    }
                },
                {
                    data: 'regDate', type: 'date', render: function (data) {
                        return moment(data).format('YYYY-MM-DD');
                    }
                },
                {
                    data: 'expireDate', type: 'date', render: function (data) {
                        return data === null ? '미 등록' : data;
                    }
                },
                {
                    data : 'register', render : function(data){
                        return data.name;
                    }
                }
            ],
            order: [1, 'desc']
        });
        table.on("click", "tbody tr", function () {
            console.log(this);
        });
        table.on("click", "tbody td", function () {
            console.log(this);
        });

    })
</script>
</body>
</html>